# ============================================================================
# Configuration File for Gaze Tracking Application
# ============================================================================
# This file controls the behavior of the application, including simulation
# modes, hardware connections, and model settings.
# 
# Note: Values in this file can be overridden by top-level constants in
# main.py if needed for development purposes.

# ----------------------------------------------------------------------------
# GPIO Configuration
# ----------------------------------------------------------------------------

# gpio_btn_marker_sim: Enable keyboard shortcut for marker button
#   - true:  Enable "N" keyboard shortcut to toggle markers (START/END tasks)
#            and show hint in HUD overlay
#   - false: Disable keyboard shortcut for markers
#   Default: true
gpio_btn_marker_sim: true

# gpio_btn_marker_enable: Enable hardware button for markers
#   - true:  Enable physical GPIO button for toggling markers
#            Works independently from gpio_btn_marker_sim
#   - false: Disable hardware button for markers
#   Default: false
gpio_btn_marker_enable: true

# gpio_btn_marker_pin: GPIO pin for marker button
#   - GPIO line number for the marker toggle button
#   - LattePanda Iota: GP0 = line 0
#   - Connect button between this pin and GND (internal pull-up enabled)
#   - Only used when gpio_btn_marker_enable is true
#   Default: 0 (GP0)
gpio_btn_marker_pin: 0

# gpio_btn_marker_debounce: Marker button debounce time
#   - Minimum time between button presses to prevent accidental double-presses
#   - Value in seconds (e.g., 0.2 = 200ms)
#   - Only used when gpio_btn_marker_enable is true
#   Default: 0.2
gpio_btn_marker_debounce: 0.2

# gpio_btn_eye_view_sim: Enable keyboard shortcut for eye view button
#   - true:  Enable keyboard shortcut to toggle eye view display
#   - false: Disable keyboard shortcut for eye view
#   Default: true
gpio_btn_eye_view_sim: true

# gpio_btn_eye_view_enable: Enable hardware button for eye view
#   - true:  Enable physical GPIO button for toggling eye view
#            Works independently from gpio_btn_eye_view_sim
#   - false: Disable hardware button for eye view
#   Default: false
gpio_btn_eye_view_enable: false

# gpio_btn_eye_view_pin: GPIO pin for eye view button
#   - GPIO line number for the eye view toggle button
#   - LattePanda Iota: GP1 = line 1 (or another available pin)
#   - Connect button between this pin and GND (internal pull-up enabled)
#   - Only used when gpio_btn_eye_view_enable is true
#   Default: 1 (GP1)
gpio_btn_eye_view_pin: 6

# gpio_btn_eye_view_debounce: Eye view button debounce time
#   - Minimum time between button presses to prevent accidental double-presses
#   - Value in seconds (e.g., 0.2 = 200ms)
#   - Only used when gpio_btn_eye_view_enable is true
#   Default: 0.2
gpio_btn_eye_view_debounce: 0.2

# gpio_btn_eye_view_key: Keyboard shortcut key for eye view
#   - Pygame key constant name (e.g., "K_v" for V key, "K_SPACE" for spacebar)
#   - Default: "K_v" (V key)
#   Default: "K_v"
gpio_btn_eye_view_key: "K_v"

# eye_view_timeout: Timeout for clearing eye view data when no updates received
#   - Duration in seconds before eye view values are cleared if no new data is received
#   - Value in seconds (e.g., 3.0 = 3 seconds)
#   - Default: 3.0
eye_view_timeout: 3.0

# gpio_led_calibration_display: Enable on-screen LED display for calibration
#   - true:  Show on-screen LED indicators during calibration sequence
#            Displays visual LED circles at calibration points
#   - false: Hide on-screen LED indicators
#   Default: true
gpio_led_calibration_display: true

# gpio_led_calibration_keyboard: Enable keyboard shortcuts for calibration
#   - true:  Enable keyboard shortcuts: Z (start calibration), 
#            X (start collection), B (stop collection)
#   - false: Disable keyboard shortcuts for calibration
#   Default: true
gpio_led_calibration_keyboard: true

# gp_calibration_method: Calibration method to use
#   - "LED":     Use LED-based calibration with Gazepoint server-side calibration.
#                Uses Gazepoint's calibration API with overlay hidden, and guides user
#                with physical LEDs at 4 corners. Gazepoint performs calibration computation.
#                Works with real hardware (not in simulation mode). No manual post-processing.
#   - "OVERLAY": Use Gazepoint Control's built-in overlay calibration window.
#                Requires Gazepoint Control software to be running.
#                Only works with real hardware (not in simulation mode).
#   - "BOTH":    Use both LED-based and overlay calibration simultaneously.
#                Both methods will run in parallel during calibration.
#   Default: "LED"
gp_calibration_method: LED

# gpio_led_calibration_enable: Enable hardware NeoPixel LEDs for calibration
#   - true:  Control physical NeoPixel LEDs during calibration sequence
#            NeoPixels are controlled via the LattePanda Iota's onboard RP2040
#            (or external microcontroller) via USB serial communication
#            The RP2040/microcontroller handles NeoPixel timing and protocol
#            NeoPixels are chained in series: DOUT of first connects to DIN of second, etc.
#            Power: 5V power supply (not 3.3V GPIO) - use LattePanda's 5V pin or external supply
#            Data: Connect NeoPixel DIN to one of RP2040's GPIO pins (e.g., GP1)
#            Ground: Common ground connection
#            Only used when gp_calibration_method is "LED" or "BOTH"
#   - false: Disable hardware NeoPixel control
#   Default: true
gpio_led_calibration_enable: true

# calib_delay: Internal delay for LED timing calculations
#   - Set to 0.0 - LED timing now uses calib_dwell only
#   - Gazepoint API parameters are controlled separately via gp_calibrate_delay and gp_calibrate_timeout
#   - Only used when gp_calibration_method is "LED" or "BOTH"
#   Default: 0.0
calib_delay: 0.0

# calib_dwell: Total duration per calibration point (for LED timing)
#   - Time in seconds for each calibration point (used for LED switching timing)
#   - Should match gp_calibrate_delay + gp_calibrate_timeout
#   - Value in seconds (e.g., 6.0 = 6000ms)
#   - Only used when gp_calibration_method is "LED" or "BOTH"
#   Default: 6.0
calib_dwell: 6.0

# gp_calibrate_delay: Gazepoint CALIBRATE_DELAY parameter (animation/preparation time)
#   - Time in seconds for animation/preparation before data collection starts
#   - Gives user time to see the blinking LED and move their eyes to look at it
#   - This is sent directly to Gazepoint API as CALIBRATE_DELAY
#   - Value in seconds (e.g., 4.5 = 4500ms)
#   - Only used when gp_calibration_method is "LED" or "BOTH"
#   - Should be: gp_calibrate_delay + gp_calibrate_timeout = calib_dwell
#   Default: 4.5
gp_calibrate_delay: 4.5

# gp_calibrate_timeout: Gazepoint CALIBRATE_TIMEOUT parameter (data collection duration)
#   - Time in seconds for actual data collection per calibration point
#   - Gazepoint collects multiple samples during this period and averages them
#   - This is sent directly to Gazepoint API as CALIBRATE_TIMEOUT
#   - Value in seconds (e.g., 1.5 = 1500ms)
#   - Only used when gp_calibration_method is "LED" or "BOTH"
#   - Should be: gp_calibrate_delay + gp_calibrate_timeout = calib_dwell
#   Default: 1.5
gp_calibrate_timeout: 1.5

# neopixel_serial_port: Serial port for NeoPixel controller
#   - COM port name on Windows (e.g., "COM3") or device path on Linux (e.g., "/dev/ttyUSB0")
#   - For LattePanda Iota: Use the RP2040 USB serial port (appears as COM port on Windows)
#   - Leave empty ("") to auto-detect by scanning for microcontroller
#   - RP2040/microcontroller should send "HELLO NEOPIXEL" on boot for auto-detection
#   - Only used when gpio_led_calibration_enable is true
#   Default: "" (auto-detect)
neopixel_serial_port: ""

# neopixel_serial_baud: Serial communication baud rate
#   - Baud rate for serial communication with NeoPixel microcontroller
#   - Common values: 9600, 115200
#   - Must match microcontroller's baud rate setting
#   - Only used when gpio_led_calibration_enable is true
#   Default: 115200
neopixel_serial_baud: 115200

# Serial Protocol (RP2040/microcontroller must implement):
#   PC→RP2040 commands (newline-terminated):
#     - INIT:<count>:<brightness>  - Initialize with pixel count and brightness (0-255)
#     - PIXEL:<idx>:<r>:<g>:<b>    - Set pixel at index to RGB color (0-255 each)
#     - ALL:OFF                     - Turn off all pixels
#     - ALL:ON:<r>:<g>:<b>          - Turn on all pixels to RGB color
#     - BRIGHTNESS:<value>          - Set global brightness (0-255)
#   RP2040→PC messages (optional, for debugging):
#     - HELLO NEOPIXEL              - Sent on boot for auto-detection
#     - ACK                         - Command acknowledged
#     - ERROR:<message>             - Error occurred
#
# Note for LattePanda Iota:
#   - The onboard RP2040 can be programmed to handle NeoPixels
#   - Connect NeoPixel DIN to an RP2040 GPIO pin (e.g., GP1)
#   - Use RP2040's hardware PWM for precise NeoPixel timing
#   - RP2040 GPIO pins are 3.3V - NeoPixels typically work with 3.3V data signals
#   - Power NeoPixels from 5V supply (LattePanda has 5V pins available)

# firmware_path: Path to RP2040 firmware file for upload
#   - Path to the .ino firmware file for the RP2040 NeoPixel controller
#   - Can be relative (from project directory) or absolute path
#   - Used by upload_firmware.py script to locate firmware
#   - Default: "firmware.ino" (in project directory)
#   Default: "firmware.ino"
firmware_path: firmware.ino

# neopixel_count: Number of NeoPixel LEDs in chain
#   - Total number of NeoPixels connected in series
#   - Should match the physical number of NeoPixels wired
#   - Only used when gpio_led_calibration_enable is true
#   Default: 4
neopixel_count: 4

# neopixel_brightness: Brightness level for NeoPixels
#   - Brightness value from 0.0 (off) to 1.0 (full brightness)
#   - Lower values reduce power consumption
#   - Recommended: 0.3 (30%) for calibration visibility without excessive power draw
#   - Only used when gpio_led_calibration_enable is true
#   Default: 0.3
neopixel_brightness: 0.3

# neopixel_color_order: Color order for NeoPixel protocol
#   - Color channel order: "RGB", "GRB", "RGBW", etc.
#   - Most WS2812 NeoPixels use "GRB" order
#   - Check your NeoPixel datasheet for correct order
#   - Only used when gpio_led_calibration_enable is true
#   Default: "GRB"
neopixel_color_order: GRB

# led_order: Physical LED layout mapping (corners only)
#   - List of 4 integers mapping logical screen corners → physical LED indices (0-based).
#   - This variable describes ONLY the physical LED disposition/order on the screen.
#   - Center is NOT configured here: the center calibration point is detected from Gazepoint's CALX/CALY
#     (near 0.5, 0.5) and will light all LEDs automatically.
#   - Positions (list indices): [low_right, low_left, high_left, high_right]
#   - Physical LED indices are 0-indexed (LED 1 = index 0, LED 2 = index 1, etc.)
#   - Example: [0, 1, 2, 3] means LED1=low_right, LED2=low_left, LED3=high_left, LED4=high_right
#   - Only used when gpio_led_calibration_enable is true
#   Default: [0, 1, 2, 3]
led_order: [0, 1, 2, 3]

# led_random_order: Randomize LED order during calibration
#   - true:  Randomize the order of LEDs during calibration sequence
#   - false: Use the order specified in led_order
#   - Only used when gpio_led_calibration_enable is true
#   Default: false
led_random_order: false

# led_repetitions: Number of times each LED is displayed during calibration
#   - Each LED in the sequence will be shown this many times
#   - Value must be >= 1
#   - Only used when gpio_led_calibration_enable is true
#   Default: 1
led_repetitions: 1

# Note: NeoPixel hardware settings (frequency, color order, pixel type) are configured
# on the microcontroller side. The PC only sends RGB color values via serial.

# ----------------------------------------------------------------------------
# Simulation Modes
# ----------------------------------------------------------------------------

# sim_gaze: Enable Gazepoint eye tracker simulation
#   - true:  Simulate Gazepoint connection and gaze data using keyboard
#            controls (1=connect, 2=disconnect, 3=toggle stream) and synthetic
#            gaze samples. Gaze data follows a Lissajous-like pattern.
#   - false: Connect to real Gazepoint hardware via TCP/IP (requires Gazepoint
#            tracker running on gp_host:gp_port). The app will automatically
#            detect and connect to Gazepoint hardware, retrying every 1 second
#            until a connection is established. If the connection is lost, it
#            will automatically attempt to reconnect.
#   Default: true
sim_gaze: false

# developpement_xg_boost: Enable XGBoost model result simulation
#   - true:  Generate fake/deterministic XGBoost predictions instead of running
#            real model inference. Useful for testing UI and workflow without
#            requiring trained models.
#   - false: Load and use real XGBoost model from model_path for predictions
#   Default: false
developpement_xg_boost: false

# dev_show_keys: Show on-screen keyboard overlay
#   - true:  Display a cheat sheet overlay at the bottom of the screen showing
#            all available keyboard shortcuts and recently pressed keys.
#            Helpful during development to remember controls.
#            Available shortcuts:
#            - GPIO simulation (when sim_gpio=true): Z, X, N, B, M, R
#            - Gazepoint simulation (when sim_gaze=true): 1, 2, 3, 4, 5
#            - Universal: R (reset app state - clears calibration, collection,
#              events, and analysis results, returns to READY state)
#   - false: Hide the keyboard overlay for cleaner UI
#   Default: true
dev_show_keys: true

# fullscreen: Run application in fullscreen mode
#   - true:  Run in fullscreen mode (recommended for production use)
#            The app window is always frameless (no title bar or borders)
#   - false: Run in windowed mode (frameless window at 480x800 resolution)
#            Useful for development and testing
#   Default: false
fullscreen: false

# ----------------------------------------------------------------------------
# Gazepoint Eye Tracker Settings
# ----------------------------------------------------------------------------

# gp_host: Gazepoint tracker TCP/IP host address
#   - IP address or hostname where Gazepoint Control software is running
#   - Use "127.0.0.1" for localhost (same machine)
#   - Only used when sim_gaze is false
#   Default: "127.0.0.1"
gp_host: 127.0.0.1

# gp_port: Gazepoint tracker TCP/IP port
#   - Port number for Gazepoint Open API communication
#   - Standard Gazepoint port is 4242
#   - Only used when sim_gaze is false
#   Default: 4242
gp_port: 4242

# calibration_ok_threshold: Maximum average error for OK calibration quality
#   - Calibration average error threshold in degrees (or units used by Gazepoint)
#   - If average_error < this value, calibration is considered "OK" (green status)
#   - Lower values mean stricter quality requirements
#   - Only used when sim_gaze is false (OpenGaze API v2 calibration)
#   Default: 1.0
calibration_ok_threshold: 1.0

# calibration_low_threshold: Maximum average error for low quality calibration
#   - Calibration average error threshold in degrees (or units used by Gazepoint)
#   - If average_error >= calibration_ok_threshold but < this value, calibration
#     is considered "low quality" (orange status)
#   - If average_error >= this value, calibration is considered "failed" (red status)
#   - Only used when sim_gaze is false (OpenGaze API v2 calibration)
#   Default: 2.0
calibration_low_threshold: 2.0

# ----------------------------------------------------------------------------
# Hardware GPIO Shared Settings
# ----------------------------------------------------------------------------

# gpio_chip: GPIO chip device path for LattePanda
#   - Device path for GPIO chip (Linux only)
#   - LattePanda Iota typically uses /dev/gpiochip0
#   - Used by both marker button and calibration LEDs when hardware GPIO is enabled
#   Default: "/dev/gpiochip0"
gpio_chip: "/dev/gpiochip0"

# ----------------------------------------------------------------------------
# Machine Learning Model Settings
# ----------------------------------------------------------------------------

# model_path: Path to XGBoost model file
#   - Relative or absolute path to the trained XGBoost model
#   - Model should be saved using joblib (MultiOutputRegressor format)
#   - Model outputs a vector: [global_score, T1, T2, ..., T10]
#   - Only used when developpement_xg_boost is false
#   - If path is relative, it's resolved from the application's working directory
#   Default: "models/model.xgb"
model_path: models/model.xgb

# feature_window_ms: Time window for feature extraction (milliseconds)
#   - Duration of gaze sample history to use when extracting features for
#     XGBoost model inference
#   - Longer windows provide more stable features but may miss recent changes
#   - Shorter windows are more responsive but may be noisier
#   - Used in sliding window statistics calculation (mean, variance, etc.)
#   - Value in milliseconds (e.g., 1500 = 1.5 seconds)
#   Default: 1500
feature_window_ms: 1500

