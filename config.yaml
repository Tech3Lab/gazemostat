# ============================================================================
# Configuration File for Gaze Tracking Application
# ============================================================================
# This file controls the behavior of the application, including simulation
# modes, hardware connections, and model settings.
# 
# Note: Values in this file can be overridden by top-level constants in
# main.py if needed for development purposes.

# ----------------------------------------------------------------------------
# GPIO Configuration
# ----------------------------------------------------------------------------

# gpio_btn_marker_sim: Enable keyboard shortcut for marker button
#   - true:  Enable "N" keyboard shortcut to toggle markers (START/END tasks)
#            and show hint in HUD overlay
#   - false: Disable keyboard shortcut for markers
#   Default: true
gpio_btn_marker_sim: true

# gpio_btn_marker_enable: Enable hardware button for markers
#   - true:  Enable physical GPIO button for toggling markers
#            Works independently from gpio_btn_marker_sim
#   - false: Disable hardware button for markers
#   Default: false
gpio_btn_marker_enable: true

# gpio_btn_marker_pin: GPIO pin for marker button
#   - GPIO line number for the marker toggle button
#   - LattePanda Iota: GP0 = line 0
#   - Connect button between this pin and GND (internal pull-up enabled)
#   - Only used when gpio_btn_marker_enable is true
#   Default: 0 (GP0)
gpio_btn_marker_pin: 0

# gpio_btn_marker_debounce: Marker button debounce time
#   - Minimum time between button presses to prevent accidental double-presses
#   - Value in seconds (e.g., 0.2 = 200ms)
#   - Only used when gpio_btn_marker_enable is true
#   Default: 0.2
gpio_btn_marker_debounce: 0.2

# gpio_led_calibration_display: Enable on-screen LED display for calibration
#   - true:  Show on-screen LED indicators during calibration sequence
#            Displays visual LED circles at calibration points
#   - false: Hide on-screen LED indicators
#   Default: true
gpio_led_calibration_display: true

# gpio_led_calibration_keyboard: Enable keyboard shortcuts for calibration
#   - true:  Enable keyboard shortcuts: Z (start calibration), 
#            X (start collection), B (stop collection)
#   - false: Disable keyboard shortcuts for calibration
#   Default: true
gpio_led_calibration_keyboard: true

# gp_calibration_method: Calibration method to use
#   - "LED":     Use LED-based calibration with Gazepoint server-side calibration.
#                Uses Gazepoint's calibration API with overlay hidden, and guides user
#                with physical LEDs at 4 corners. Gazepoint performs calibration computation.
#                Works with real hardware (not in simulation mode). No manual post-processing.
#   - "OVERLAY": Use Gazepoint Control's built-in overlay calibration window.
#                Requires Gazepoint Control software to be running.
#                Only works with real hardware (not in simulation mode).
#   - "BOTH":    Use both LED-based and overlay calibration simultaneously.
#                Both methods will run in parallel during calibration.
#   Default: "LED"
gp_calibration_method: LED

# gpio_led_calibration_enable: Enable hardware NeoPixel LEDs for calibration
#   - true:  Control physical NeoPixel LEDs during calibration sequence
#            NeoPixels are chained in series: data pin connects to first pixel,
#            DOUT of first connects to DIN of second, etc.
#            Power: 5V power supply (not 3.3V GPIO)
#            Ground: Common ground connection
#            Only used when gp_calibration_method is "LED" or "BOTH"
#   - false: Disable hardware NeoPixel control
#   Default: true
gpio_led_calibration_enable: true

# calib_delay: Delay after LED turns on before collecting gaze samples
#   - Time in seconds to wait after LED turns on before starting data collection
#   - Gives user time to move their eyes to look at the LED
#   - Value in seconds (e.g., 0.3 = 300ms)
#   - Only used when gp_calibration_method is "LED" or "BOTH"
#   Default: 0.3
calib_delay: 0.3

# calib_dwell: Duration to collect gaze samples at each calibration point
#   - Time in seconds to collect gaze samples after the delay period
#   - Longer durations provide more samples but take more time
#   - Value in seconds (e.g., 0.9 = 900ms)
#   - Only used when gp_calibration_method is "LED" or "BOTH"
#   Default: 0.9
calib_dwell: 0.9

# neopixel_data_pin: GPIO pin for NeoPixel data line
#   - GPIO line number for NeoPixel data signal
#   - LattePanda Iota: GP1 = line 1 (example)
#   - Connect NeoPixel DIN to this GPIO pin
#   - Note: May need level shifter if GPIO outputs 3.3V (NeoPixels expect 5V data)
#   - Only used when gpio_led_calibration_enable is true
#   Default: 1 (GP1)
neopixel_data_pin: 1

# neopixel_count: Number of NeoPixel LEDs in chain
#   - Total number of NeoPixels connected in series
#   - Should match the physical number of NeoPixels wired
#   - Only used when gpio_led_calibration_enable is true
#   Default: 4
neopixel_count: 4

# neopixel_brightness: Brightness level for NeoPixels
#   - Brightness value from 0.0 (off) to 1.0 (full brightness)
#   - Lower values reduce power consumption
#   - Recommended: 0.3 (30%) for calibration visibility without excessive power draw
#   - Only used when gpio_led_calibration_enable is true
#   Default: 0.3
neopixel_brightness: 0.3

# neopixel_color_order: Color order for NeoPixel protocol
#   - Color channel order: "RGB", "GRB", "RGBW", etc.
#   - Most WS2812 NeoPixels use "GRB" order
#   - Check your NeoPixel datasheet for correct order
#   - Only used when gpio_led_calibration_enable is true
#   Default: "GRB"
neopixel_color_order: GRB

# neopixel_frequency: PWM frequency for NeoPixel data signal
#   - Frequency in Hz for the data protocol
#   - WS2812 typically uses 800000 Hz (800 kHz)
#   - SK6812 may use different frequency
#   - Only used when gpio_led_calibration_enable is true
#   Default: 800000
neopixel_frequency: 800000

# neopixel_dma_channel: DMA channel for hardware timing
#   - DMA channel number for hardware-accelerated timing (Linux-specific)
#   - Used by rpi-ws281x library for precise timing
#   - Default channel 5 is usually available
#   - Only used when gpio_led_calibration_enable is true
#   Default: 5
neopixel_dma_channel: 5

# neopixel_invert: Invert NeoPixel data signal
#   - true:  Invert the data signal (for level shifters that invert)
#   - false: Normal signal polarity
#   - Only used when gpio_led_calibration_enable is true
#   Default: false
neopixel_invert: false

# neopixel_pixel_type: NeoPixel type identifier
#   - Pixel type string: "WS2812", "SK6812", etc.
#   - Used by library to determine protocol details
#   - Only used when gpio_led_calibration_enable is true
#   Default: "WS2812"
neopixel_pixel_type: WS2812

# ----------------------------------------------------------------------------
# Simulation Modes
# ----------------------------------------------------------------------------

# sim_gaze: Enable Gazepoint eye tracker simulation
#   - true:  Simulate Gazepoint connection and gaze data using keyboard
#            controls (1=connect, 2=disconnect, 3=toggle stream) and synthetic
#            gaze samples. Gaze data follows a Lissajous-like pattern.
#   - false: Connect to real Gazepoint hardware via TCP/IP (requires Gazepoint
#            tracker running on gp_host:gp_port). The app will automatically
#            detect and connect to Gazepoint hardware, retrying every 1 second
#            until a connection is established. If the connection is lost, it
#            will automatically attempt to reconnect.
#   Default: true
sim_gaze: false

# developpement_xg_boost: Enable XGBoost model result simulation
#   - true:  Generate fake/deterministic XGBoost predictions instead of running
#            real model inference. Useful for testing UI and workflow without
#            requiring trained models.
#   - false: Load and use real XGBoost model from model_path for predictions
#   Default: false
developpement_xg_boost: false

# dev_show_keys: Show on-screen keyboard overlay
#   - true:  Display a cheat sheet overlay at the bottom of the screen showing
#            all available keyboard shortcuts and recently pressed keys.
#            Helpful during development to remember controls.
#            Available shortcuts:
#            - GPIO simulation (when sim_gpio=true): Z, X, N, B, M, R
#            - Gazepoint simulation (when sim_gaze=true): 1, 2, 3, 4, 5
#            - Universal: R (reset app state - clears calibration, collection,
#              events, and analysis results, returns to READY state)
#   - false: Hide the keyboard overlay for cleaner UI
#   Default: true
dev_show_keys: true

# fullscreen: Run application in fullscreen mode
#   - true:  Run in fullscreen mode (recommended for production use)
#            The app window is always frameless (no title bar or borders)
#   - false: Run in windowed mode (frameless window at 480x800 resolution)
#            Useful for development and testing
#   Default: false
fullscreen: false

# ----------------------------------------------------------------------------
# Gazepoint Eye Tracker Settings
# ----------------------------------------------------------------------------

# gp_host: Gazepoint tracker TCP/IP host address
#   - IP address or hostname where Gazepoint Control software is running
#   - Use "127.0.0.1" for localhost (same machine)
#   - Only used when sim_gaze is false
#   Default: "127.0.0.1"
gp_host: 127.0.0.1

# gp_port: Gazepoint tracker TCP/IP port
#   - Port number for Gazepoint Open API communication
#   - Standard Gazepoint port is 4242
#   - Only used when sim_gaze is false
#   Default: 4242
gp_port: 4242

# calibration_ok_threshold: Maximum average error for OK calibration quality
#   - Calibration average error threshold in degrees (or units used by Gazepoint)
#   - If average_error < this value, calibration is considered "OK" (green status)
#   - Lower values mean stricter quality requirements
#   - Only used when sim_gaze is false (OpenGaze API v2 calibration)
#   Default: 1.0
calibration_ok_threshold: 1.0

# calibration_low_threshold: Maximum average error for low quality calibration
#   - Calibration average error threshold in degrees (or units used by Gazepoint)
#   - If average_error >= calibration_ok_threshold but < this value, calibration
#     is considered "low quality" (orange status)
#   - If average_error >= this value, calibration is considered "failed" (red status)
#   - Only used when sim_gaze is false (OpenGaze API v2 calibration)
#   Default: 2.0
calibration_low_threshold: 2.0

# ----------------------------------------------------------------------------
# Hardware GPIO Shared Settings
# ----------------------------------------------------------------------------

# gpio_chip: GPIO chip device path for LattePanda
#   - Device path for GPIO chip (Linux only)
#   - LattePanda Iota typically uses /dev/gpiochip0
#   - Used by both marker button and calibration LEDs when hardware GPIO is enabled
#   Default: "/dev/gpiochip0"
gpio_chip: "/dev/gpiochip0"

# ----------------------------------------------------------------------------
# Machine Learning Model Settings
# ----------------------------------------------------------------------------

# model_path: Path to XGBoost model file
#   - Relative or absolute path to the trained XGBoost model
#   - Model should be saved using joblib (MultiOutputRegressor format)
#   - Model outputs a vector: [global_score, T1, T2, ..., T10]
#   - Only used when developpement_xg_boost is false
#   - If path is relative, it's resolved from the application's working directory
#   Default: "models/model.xgb"
model_path: models/model.xgb

# feature_window_ms: Time window for feature extraction (milliseconds)
#   - Duration of gaze sample history to use when extracting features for
#     XGBoost model inference
#   - Longer windows provide more stable features but may miss recent changes
#   - Shorter windows are more responsive but may be noisier
#   - Used in sliding window statistics calculation (mean, variance, etc.)
#   - Value in milliseconds (e.g., 1500 = 1.5 seconds)
#   Default: 1500
feature_window_ms: 1500

